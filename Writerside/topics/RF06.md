# âœï¸ RF06 - Editar Membro

![Logo.png](Logo.png){ width=150 }

## ðŸ“ DescriÃ§Ã£o

Esta funcionalidade permite que o operador atualize os dados de um membro jÃ¡ cadastrado no sistema Quilombo Pena Branca, mantendo o histÃ³rico de informaÃ§Ãµes atualizado.

## ðŸ‘‘ Atores

- Administrador do sistema
- Operador

## âš ï¸ PrÃ©-condiÃ§Ãµes

- O operador deve estar autenticado no sistema
- O membro a ser editado deve estar cadastrado no sistema
- O CPF nÃ£o pode ser alterado para um CPF jÃ¡ cadastrado para outro membro

## ðŸ”Œ Endpoints

- `PUT /quilombo-api/member/{id}`

## ðŸ“‹ Dados do Membro

| Campo              | Tipo      | ObrigatÃ³rio | DescriÃ§Ã£o                                    | RestriÃ§Ãµes                      |
|--------------------|-----------|-------------|----------------------------------------------|---------------------------------|
| `name`             | `string`  | âœ… Sim       | Nome completo do membro                      | MÃ­nimo de 3 caracteres          |
| `email`            | `string`  | âœ… Sim       | E-mail do membro                             | Formato vÃ¡lido de e-mail        |
| `cpf`              | `string`  | âœ… Sim       | CPF do membro                                | Formato vÃ¡lido (999.999.999-99) |
| `phone`            | `string`  | âœ… Sim       | Telefone do membro                           | Formato vÃ¡lido                  |
| `dateOfBirth`      | `date`    | âœ… Sim       | Data de nascimento                           | Formato vÃ¡lido (YYYY-MM-DD)     |
| `entryDate`        | `date`    | âœ… Sim       | Data entrada no terreiro/AssociaÃ§Ã£o/Quilombo | Formato vÃ¡lido (YYYY-MM-DD)     |
| `biologicalFather` | `string`  | âœ… Sim       | Pai (biolÃ³gico)                              | MÃ­nimo de 3 caracteres          |
| `biologicalMother` | `string`  | âœ… Sim       | MÃ£e (biolÃ³gica)                              | MÃ­nimo de 3 caracteres          |
| `spiritualFather`  | `string`  | âœ… Sim       | Pai (santo)                                  | MÃ­nimo de 3 caracteres          |
| `spiritualMother`  | `string`  | âœ… Sim       | MÃ£e (santo)                                  | MÃ­nimo de 3 caracteres          |
| `initiationDate`   | `date`    | âœ… Sim       | Data da Feitura                              | Formato vÃ¡lido (YYYY-MM-DD)     |
| `obligationsDate`  | `date`    | âœ… Sim       | Data das obrigaÃ§Ãµes                          | Formato vÃ¡lido (YYYY-MM-DD)     |
| `isRodante`        | `boolean` | âœ… Sim       | Se o membro Ã© rodante                        | true/false                      |
| `positions`        | `array`   | âŒ NÃ£o       | Cargos do membro                             | Array de IDs de cargos          |
| `address`          | `object`  | âœ… Sim       | EndereÃ§o completo                            | Objeto com dados de endereÃ§o    |

## ðŸ  Dados do EndereÃ§o

| Campo       | Tipo     | ObrigatÃ³rio | DescriÃ§Ã£o        | RestriÃ§Ãµes         |
|-------------|----------|-------------|------------------|---------------------|
| `zipCode`   | `string` | âœ… Sim      | CEP              | Formato: 99999-999  |
| `street`    | `string` | âœ… Sim      | Rua/Logradouro   | -                   |
| `number`    | `string` | âœ… Sim      | NÃºmero           | -                   |
| `complement`| `string` | âŒ NÃ£o      | Complemento      | -                   |
| `district`  | `string` | âœ… Sim      | Bairro           | -                   |
| `city`      | `string` | âœ… Sim      | Cidade           | -                   |
| `state`     | `string` | âœ… Sim      | Estado           | 2 caracteres (sigla)|

## ðŸ”„ Fluxo Principal

```mermaid
sequenceDiagram
    actor O as Operador
    participant S as Sistema
    participant BD as Banco de Dados
    
    O->>S: Acessa a pÃ¡gina de detalhes do membro
    S->>BD: Busca dados do membro
    BD->>S: Retorna dados do membro
    S->>O: Exibe dados do membro com opÃ§Ã£o de ediÃ§Ã£o
    O->>S: Clica em editar membro
    S->>O: Exibe formulÃ¡rio preenchido com dados atuais
    O->>S: Modifica os dados necessÃ¡rios
    O->>S: Envia formulÃ¡rio
    S->>S: Valida dados informados
    S->>BD: Atualiza dados do membro
    S->>O: Exibe mensagem de confirmaÃ§Ã£o
```

1. O operador acessa a pÃ¡gina de detalhes do membro que deseja editar.
2. O sistema exibe os dados atuais do membro com opÃ§Ã£o de ediÃ§Ã£o.
3. O operador clica em "Editar Membro".
4. O sistema exibe um formulÃ¡rio preenchido com os dados atuais do membro.
5. O operador modifica os campos necessÃ¡rios.
6. O operador envia o formulÃ¡rio com as alteraÃ§Ãµes.
7. O sistema valida os dados informados.
8. O sistema atualiza os dados do membro.
9. O sistema exibe uma mensagem de confirmaÃ§Ã£o da atualizaÃ§Ã£o.

## ðŸ”€ Fluxos Alternativos

### âš ï¸ F01 - CPF alterado para um jÃ¡ existente

```mermaid
sequenceDiagram
    actor O as Operador
    participant S as Sistema
    participant BD as Banco de Dados
    
    O->>S: Modifica dados incluindo CPF
    O->>S: Envia formulÃ¡rio
    S->>BD: Verifica se CPF jÃ¡ existe para outro membro
    BD->>S: CPF jÃ¡ existe para outro membro
    S->>O: Exibe mensagem de erro
```

1. No passo 5 do fluxo principal, o operador altera o CPF do membro.
2. O operador envia o formulÃ¡rio com as alteraÃ§Ãµes.
3. O sistema verifica que o CPF jÃ¡ estÃ¡ cadastrado para outro membro.
4. O sistema exibe uma mensagem de erro informando que o CPF jÃ¡ estÃ¡ em uso.
5. O sistema mantÃ©m os dados jÃ¡ preenchidos para correÃ§Ã£o.

### âš ï¸ F02 - Dados invÃ¡lidos

1. No passo 7 do fluxo principal, o sistema identifica dados invÃ¡lidos (formato incorreto, campos obrigatÃ³rios em branco).
2. O sistema exibe mensagens especÃ­ficas para cada erro encontrado.
3. O sistema mantÃ©m os dados jÃ¡ preenchidos para correÃ§Ã£o.

## ðŸ§ª Exemplo de RequisiÃ§Ã£o

### RequisiÃ§Ã£o HTTP
```http
PUT /quilombo-api/member/42 HTTP/1.1
Host: api.quilombopenabranca.org
Content-Type: application/json
Authorization: Bearer {token}

{
  "name": "Maria da Silva Santos",
  "email": "maria.santos@email.com",
  "cpf": "123.456.789-01",
  "phone": "(11) 98765-4321",
  "dateOfBirth": "1985-05-12",
  "entryDate": "2018-03-20",
  "biologicalFather": "JoÃ£o da Silva",
  "biologicalMother": "Ana da Silva",
  "spiritualFather": "JosÃ© de OxÃ³ssi",
  "spiritualMother": "Maria de IemanjÃ¡",
  "initiationDate": "2019-06-15",
  "obligationsDate": "2022-06-15",
  "isRodante": true,
  "positions": [3, 7],
  "address": {
    "zipCode": "01234-567",
    "street": "Rua das Flores",
    "number": "123",
    "complement": "Apto 45B",
    "district": "Jardim Primavera",
    "city": "SÃ£o Paulo",
    "state": "SP"
  }
}
```

### Resposta de Sucesso
```http
HTTP/1.1 200 OK
Content-Type: application/json

{
  "id": 42,
  "name": "Maria da Silva Santos",
  "cpf": "123.456.789-01",
  "isRodante": true,
  "updatedAt": "2023-06-20T09:15:30Z"
}
```

## ðŸ–¼ï¸ Interface de ReferÃªncia

![editar-membro.png](editar-membro.png)


---


> ---------------------------------------------------------------------------
> #### ðŸŒ™ Quilombo Pena Branca ðŸŒ™
> ***Honrando nossas raÃ­zes, construindo nosso futuro***
> ---------------------------------------------------------------------------