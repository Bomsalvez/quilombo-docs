# üë• RF06 - Cadastrar Membro

![Logo.png](Logo.png){ width=150 }

## üìù Descri√ß√£o

Esta funcionalidade permite que o operador cadastre um novo membro no sistema Quilombo Pena Branca, registrando tanto informa√ß√µes pessoais quanto espirituais.

## üëë Atores

- Administrador do sistema
- Operador

## ‚ö†Ô∏è Pr√©-condi√ß√µes

- O operador deve estar autenticado no sistema
- O CPF informado n√£o pode estar registrado para outro membro

## üîå Endpoints

- `POST /api/v1/members`

## üìã Dados do Membro

| Campo              | Tipo      | Obrigat√≥rio | Descri√ß√£o                                    | Restri√ß√µes                      |
|--------------------|-----------|-------------|----------------------------------------------|---------------------------------|
| `name`             | `string`  | ‚úÖ Sim       | Nome completo do membro                      | M√≠nimo de 3 caracteres          |
| `email`            | `string`  | ‚úÖ Sim       | E-mail do membro                             | Formato v√°lido de e-mail        |
| `cpf`              | `string`  | ‚úÖ Sim       | CPF do membro                                | Formato v√°lido (999.999.999-99) |
| `phone`            | `string`  | ‚úÖ Sim       | Telefone do membro                           | Formato v√°lido                  |
| `dateOfBirth`      | `date`    | ‚úÖ Sim       | Data de nascimento                           | Formato v√°lido (YYYY-MM-DD)     |
| `entryDate`        | `date`    | ‚úÖ Sim       | Data entrada no terreiro/Associa√ß√£o/Quilombo | Formato v√°lido (YYYY-MM-DD)     |
| `biologicalFather` | `string`  | ‚úÖ Sim       | Pai (biol√≥gico)                              | M√≠nimo de 3 caracteres          |
| `biologicalMother` | `string`  | ‚úÖ Sim       | M√£e (biol√≥gica)                              | M√≠nimo de 3 caracteres          |
| `spiritualFather`  | `string`  | ‚úÖ Sim       | Pai (santo)                                  | M√≠nimo de 3 caracteres          |
| `spiritualMother`  | `string`  | ‚úÖ Sim       | M√£e (santo)                                  | M√≠nimo de 3 caracteres          |
| `initiationDate`   | `date`    | ‚úÖ Sim       | Data da Feitura                              | Formato v√°lido (YYYY-MM-DD)     |
| `obligationsDate`  | `date`    | ‚úÖ Sim       | Data das obriga√ß√µes                          | Formato v√°lido (YYYY-MM-DD)     |
| `isRodante`        | `boolean` | ‚úÖ Sim       | Se o membro √© rodante                        | true/false                      |
| `positions`        | `array`   | ‚ùå N√£o       | Cargos do membro                             | Array de IDs de cargos          |
| `address`          | `object`  | ‚úÖ Sim       | Endere√ßo completo                            | Objeto com dados de endere√ßo    |

## üè† Dados do Endere√ßo

| Campo       | Tipo     | Obrigat√≥rio | Descri√ß√£o        | Restri√ß√µes         |
|-------------|----------|-------------|------------------|---------------------|
| `zipCode`   | `string` | ‚úÖ Sim      | CEP              | Formato: 99999-999  |
| `street`    | `string` | ‚úÖ Sim      | Rua/Logradouro   | -                   |
| `number`    | `string` | ‚úÖ Sim      | N√∫mero           | -                   |
| `complement`| `string` | ‚ùå N√£o      | Complemento      | -                   |
| `district`  | `string` | ‚úÖ Sim      | Bairro           | -                   |
| `city`      | `string` | ‚úÖ Sim      | Cidade           | -                   |
| `state`     | `string` | ‚úÖ Sim      | Estado           | 2 caracteres (sigla)|

## üîÑ Fluxo Principal

```mermaid
sequenceDiagram
    actor O as Operador
    participant S as Sistema
    participant BD as Banco de Dados
    
    O->>S: Acessa p√°gina de cadastro de membro
    S->>O: Exibe formul√°rio de cadastro
    O->>S: Preenche dados do membro
    O->>S: Envia formul√°rio
    S->>S: Valida dados informados
    S->>BD: Verifica se CPF j√° existe
    BD->>S: Retorna resultado
    S->>BD: Salva novo membro
    S->>O: Exibe mensagem de sucesso
```

1. O operador acessa a p√°gina de cadastro de membro.
2. O sistema exibe um formul√°rio de cadastro com todos os campos necess√°rios.
3. O operador preenche os campos obrigat√≥rios do formul√°rio.
4. O operador envia o formul√°rio de cadastro.
5. O sistema valida os dados informados.
6. O sistema cria um registro de membro com os dados fornecidos.
7. O sistema exibe uma mensagem de confirma√ß√£o de cadastro.

## üîÄ Fluxos Alternativos

### ‚ö†Ô∏è F01 - CPF j√° cadastrado

```mermaid
sequenceDiagram
    actor O as Operador
    participant S as Sistema
    participant BD as Banco de Dados
    
    O->>S: Acessa p√°gina de cadastro de membro
    S->>O: Exibe formul√°rio de cadastro
    O->>S: Preenche dados do membro
    O->>S: Envia formul√°rio
    S->>S: Valida dados informados
    S->>BD: Verifica se CPF j√° existe
    BD->>S: CPF j√° existe
    S->>O: Exibe mensagem de erro
```

1. O operador acessa a p√°gina de cadastro de membro.
2. O sistema exibe um formul√°rio de cadastro.
3. O operador preenche os campos obrigat√≥rios do formul√°rio.
4. O operador envia o formul√°rio de cadastro.
5. O sistema valida os dados e identifica que o CPF j√° est√° cadastrado.
6. O sistema exibe uma mensagem de erro informando que o CPF j√° est√° em uso.
7. O sistema mant√©m os dados j√° preenchidos para corre√ß√£o.

### ‚ö†Ô∏è F02 - Dados inv√°lidos

1. No passo 5 do fluxo principal, o sistema identifica dados inv√°lidos (formato incorreto, campos obrigat√≥rios em branco).
2. O sistema exibe mensagens espec√≠ficas para cada erro encontrado.
3. O sistema mant√©m os dados j√° preenchidos para corre√ß√£o.

## üß™ Exemplo de Requisi√ß√£o

### Requisi√ß√£o HTTP
```http
POST /api/v1/members HTTP/1.1
Host: api.quilombopenabranca.org
Content-Type: application/json
Authorization: Bearer {token}

{
  "name": "Maria da Silva",
  "email": "maria@email.com",
  "cpf": "123.456.789-01",
  "phone": "(11) 98765-4321",
  "dateOfBirth": "1985-05-12",
  "entryDate": "2018-03-20",
  "biologicalFather": "Jo√£o da Silva",
  "biologicalMother": "Ana da Silva",
  "spiritualFather": "Jos√© de Ox√≥ssi",
  "spiritualMother": "Maria de Iemanj√°",
  "initiationDate": "2019-06-15",
  "obligationsDate": "2022-06-15",
  "isRodante": true,
  "positions": [3, 5],
  "address": {
    "zipCode": "01234-567",
    "street": "Rua das Flores",
    "number": "123",
    "complement": "Apto 45",
    "district": "Jardim Primavera",
    "city": "S√£o Paulo",
    "state": "SP"
  }
}
```

### Resposta de Sucesso
```http
HTTP/1.1 201 Created
Content-Type: application/json

{
  "id": 42,
  "name": "Maria da Silva",
  "cpf": "123.456.789-01",
  "isRodante": true,
  "createdAt": "2023-05-15T14:23:45Z"
}
```

## üñºÔ∏è Interface de Refer√™ncia

![Formul√°rio de Cadastro de Membro](https://via.placeholder.com/800x600.png?text=Formul√°rio+de+Cadastro+de+Membro)

---

  #### üåô Quilombo Pena Branca üåô
  ***Honrando nossas ra√≠zes, construindo nosso futuro***