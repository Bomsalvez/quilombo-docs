# ðŸ“ RF11 - Cadastrar ObrigaÃ§Ã£o

![Logo.png](Logo.png){ width=150 }

## ðŸ“ DescriÃ§Ã£o

Este requisito funcional permite que os operadores registrem novas obrigaÃ§Ãµes religiosas para os membros do Quilombo Pena Branca. As obrigaÃ§Ãµes religiosas sÃ£o elementos fundamentais das prÃ¡ticas culturais e espirituais da comunidade, possibilitando o acompanhamento da trajetÃ³ria espiritual de cada membro.

## ðŸ‘‘ Atores

- Administrador do sistema
- Operador

## âœ… PrÃ©-condiÃ§Ãµes

- O operador deve estar autenticado no sistema
- O membro para o qual a obrigaÃ§Ã£o serÃ¡ registrada deve estar cadastrado e ativo
- O operador deve possuir permissÃ£o para cadastrar obrigaÃ§Ãµes

## ðŸŒ Endpoint

- `POST /quilombo-api/obligation`

## ðŸ“Š Dados da ObrigaÃ§Ã£o

| Campo    | Tipo      | ObrigatÃ³rio | RestriÃ§Ãµes                                |
|----------|-----------|-------------|-------------------------------------------|
| memberId | Long      | âœ“           | ID de membro existente no sistema         |
| type     | String    | âœ“           | Tipo da obrigaÃ§Ã£o (enum de tipos vÃ¡lidos) |
| date     | LocalDate | âœ“           | Data nÃ£o pode ser futura                  |
| periodo  | int       | âœ“           | MÃ­nimo 0                                  |

## ðŸ”„ Fluxo Principal

```mermaid
sequenceDiagram
    participant O as Operador
    participant S as Sistema
    participant DB as Banco de Dados
    
    O->>S: Acessa a pÃ¡gina de cadastro de obrigaÃ§Ãµes
    S->>O: Exibe formulÃ¡rio de cadastro
    O->>S: Seleciona o membro
    S->>DB: Busca dados do membro
    DB->>S: Retorna dados do membro
    S->>O: Preenche automaticamente dados do membro
    O->>S: Preenche dados da obrigaÃ§Ã£o
    O->>S: Clica no botÃ£o "Salvar"
    S->>S: Valida os dados informados
    S->>DB: Armazena a obrigaÃ§Ã£o
    S->>O: Redireciona para a pÃ¡gina de detalhes da obrigaÃ§Ã£o
```

## ðŸ”€ Fluxos Alternativos

### 1. Dados invÃ¡lidos

```mermaid
sequenceDiagram
    participant O as Operador
    participant S as Sistema
    
    O->>S: Preenche dados com valores invÃ¡lidos
    O->>S: Clica no botÃ£o "Salvar"
    S->>S: Valida os dados informados
    S->>O: Exibe mensagens de erro nos campos invÃ¡lidos
    S->>O: MantÃ©m os dados vÃ¡lidos preenchidos
```

### 2. Membro inativo ou nÃ£o encontrado

```mermaid
sequenceDiagram
    participant O as Operador
    participant S as Sistema
    participant DB as Banco de Dados
    
    O->>S: Seleciona ou informa ID de membro inexistente/inativo
    S->>DB: Busca dados do membro
    DB->>S: Retorna erro ou status inativo
    S->>O: Exibe mensagem "Membro nÃ£o encontrado ou inativo"
    S->>O: Solicita seleÃ§Ã£o de outro membro
```


## ðŸ“„ Exemplo de RequisiÃ§Ã£o HTTP

```http
POST /quilombo-api/obligations HTTP/1.1
Host: api.quilombopenabranca.org
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

{
  "memberId": 42,
  "type": "KUDYA",
  "date": "2023-05-15",
  "periodo": "1"
}
```

## ðŸ“„ Exemplo de Resposta (Sucesso)

```json
{
  "id": 123,
  "memberId": 42,
  "type": "KUDYA",
  "date": "2023-05-15",
  "period": "1"
}
```

## ðŸ–¼ï¸ Interface de ReferÃªncia

![obrigacoes.png](obrigacoes.png)

## ðŸ“‹ Tipos de ObrigaÃ§Ãµes

| CÃ³digo    | DescriÃ§Ã£o   |
|-----------|-------------|
| KUDYA     | Comer       |
| KESO      | Beber       |
| KUNDULA   | Batizado    |
| FEITURA   | Feitura     |
| KUKUNDULA | ConfirmaÃ§Ã£o |


---

> ---------------------------------------------------------------------------
> #### ðŸŒ™ Quilombo Pena Branca ðŸŒ™
> ***Honrando nossas raÃ­zes, construindo nosso futuro***
> ---------------------------------------------------------------------------