# ğŸšª RF11 - Deslogar Operador

![Logo.png](Logo.png){ width=150 }

## ğŸ“ DescriÃ§Ã£o

Este requisito funcional permite que os operadores realizem logout do sistema Quilombo Pena Branca, garantindo o encerramento seguro da sessÃ£o e protegendo o acesso indevido apÃ³s o tÃ©rmino da utilizaÃ§Ã£o. O processo de logout Ã© essencial para a seguranÃ§a, especialmente em ambientes compartilhados.

## ğŸ‘‘ Atores

- Administrador do sistema
- Operador

## âœ… PrÃ©-condiÃ§Ãµes

- O operador deve estar autenticado no sistema
- O operador deve possuir uma sessÃ£o ativa

## ğŸŒ Endpoint

- `POST /api/v1/auth/logout`

## ğŸ“Š Dados para Logout

| Campo        | Tipo   | ObrigatÃ³rio | RestriÃ§Ãµes                              |
|--------------|--------|-------------|-----------------------------------------|
| refreshToken | String | âœ“           | Token de atualizaÃ§Ã£o fornecido no login |

## ğŸ”„ Fluxo Principal

```mermaid
sequenceDiagram
    participant O as Operador
    participant S as Sistema
    participant DB as Banco de Dados
    
    O->>S: Clica no botÃ£o "Sair"
    S->>S: Invalida token JWT
    S->>DB: Registra logout
    S->>O: Redireciona para a pÃ¡gina de login
    S->>O: Exibe mensagem de confirmaÃ§Ã£o de logout
```

## ğŸ”€ Fluxos Alternativos

### 1. SessÃ£o expirada

```mermaid
sequenceDiagram
    participant O as Operador
    participant S as Sistema
    
    O->>S: Tenta realizar alguma aÃ§Ã£o apÃ³s expiraÃ§Ã£o do token
    S->>O: Detecta token expirado
    S->>O: Redireciona para a pÃ¡gina de login
    S->>O: Exibe mensagem "SessÃ£o expirada, faÃ§a login novamente"
```

### 2. Logout automÃ¡tico por inatividade

```mermaid
sequenceDiagram
    participant O as Operador
    participant S as Sistema
    participant DB as Banco de Dados
    
    S->>S: Detecta inatividade pelo tempo configurado
    S->>S: Invalida token JWT
    S->>DB: Registra logout automÃ¡tico
    S->>O: Redireciona para a pÃ¡gina de login
    S->>O: Exibe mensagem "SessÃ£o encerrada por inatividade"
```

## ğŸ“„ Exemplo de RequisiÃ§Ã£o HTTP

```http
POST /api/v1/auth/logout HTTP/1.1
Host: api.quilombopenabranca.org
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

{
  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

## ğŸ“„ Exemplo de Resposta (Sucesso)

```json
{
  "message": "Logout realizado com sucesso",
  "timestamp": "2023-05-20T15:45:30Z"
}
```

## ğŸ–¼ï¸ Interface de ReferÃªncia

![Interface de Logout](logout-option.png)

## ğŸ”’ ConsideraÃ§Ãµes de SeguranÃ§a

- O sistema deve invalidar completamente o token JWT no servidor
- Os tokens de refresh tambÃ©m devem ser invalidados no momento do logout
- O sistema deve implementar logout automÃ¡tico apÃ³s um perÃ­odo configurÃ¡vel de inatividade
- Todas as sessÃµes encerradas devem ser registradas no log de auditoria
- O sistema deve limpar qualquer dado sensÃ­vel armazenado localmente no navegador
- ApÃ³s o logout, o sistema deve redirecionar sempre para a tela de login, nunca mantendo acesso a Ã¡reas protegidas

## ğŸ“± Compatibilidade

- O logout deve funcionar corretamente em diferentes dispositivos (desktop, tablet, mobile)
- O sistema deve garantir que a sessÃ£o seja encerrada mesmo em caso de fechamento inesperado do navegador
- O processo deve ser suportado nos principais navegadores (Chrome, Firefox, Safari, Edge)

---

  #### ğŸŒ™ Quilombo Pena Branca ğŸŒ™
  Honrando nossas raÃ­zes, construindo nosso futuro