# ğŸš« RF08 - Desativar Membro

![Logo.png](Logo.png){ width=150 }

## ğŸ“ DescriÃ§Ã£o

Esta funcionalidade permite que o operador desative um membro no sistema Quilombo Pena Branca, mantendo seu histÃ³rico e dados, mas impedindo que participe ativamente das atividades da comunidade.

## ğŸ‘‘ Atores

- Administrador do sistema
- Operador

## âš ï¸ PrÃ©-condiÃ§Ãµes

- O operador deve estar autenticado no sistema
- O membro a ser desativado deve estar atualmente ativo no sistema
- O membro deve estar cadastrado no sistema

## ğŸ”Œ Endpoints

- `PATCH /api/v1/members/{id}/deactivate`

## ğŸ“‹ Dados da DesativaÃ§Ã£o

| Campo      | Tipo      | ObrigatÃ³rio | DescriÃ§Ã£o              | RestriÃ§Ãµes              |
|------------|-----------|-------------|------------------------|-------------------------|
| `id`       | `integer` | âœ… Sim       | ID do membro           | Deve existir no sistema |
| `reason`   | `string`  | âœ… Sim       | Motivo da desativaÃ§Ã£o  | MÃ­nimo de 5 caracteres  |
| `comments` | `string`  | âŒ NÃ£o       | ComentÃ¡rios adicionais | -                       |
| `date`     | `date`    | âœ… Sim       | Data da desativaÃ§Ã£o    | Formato YYYY-MM-DD      |

## ğŸ”„ Fluxo Principal

```mermaid
sequenceDiagram
    actor O as Operador
    participant S as Sistema
    participant BD as Banco de Dados
    
    O->>S: Acessa a pÃ¡gina de detalhes do membro
    S->>BD: Busca dados do membro
    BD->>S: Retorna dados do membro
    S->>O: Exibe dados do membro com opÃ§Ã£o de desativar
    O->>S: Clica em desativar membro
    S->>O: Exibe formulÃ¡rio de confirmaÃ§Ã£o
    O->>S: Preenche motivo e confirma desativaÃ§Ã£o
    S->>S: Valida dados informados
    S->>BD: Atualiza status do membro para inativo
    BD->>S: Confirma atualizaÃ§Ã£o
    S->>O: Exibe mensagem de confirmaÃ§Ã£o
```

1. O operador acessa a pÃ¡gina de detalhes do membro que deseja desativar.
2. O sistema exibe os dados do membro com a opÃ§Ã£o de desativaÃ§Ã£o.
3. O operador clica no botÃ£o "Desativar Membro".
4. O sistema apresenta um formulÃ¡rio de confirmaÃ§Ã£o solicitando o motivo da desativaÃ§Ã£o.
5. O operador preenche o motivo da desativaÃ§Ã£o e confirma a aÃ§Ã£o.
6. O sistema valida os dados informados.
7. O sistema altera o status do membro para inativo e registra o motivo da desativaÃ§Ã£o.
8. O sistema exibe uma mensagem de confirmaÃ§Ã£o da desativaÃ§Ã£o.

## ğŸ”€ Fluxos Alternativos

### âš ï¸ F01 - Membro jÃ¡ desativado

```mermaid
sequenceDiagram
    actor O as Operador
    participant S as Sistema
    participant BD as Banco de Dados
    
    O->>S: Tenta desativar um membro
    S->>BD: Verifica status atual do membro
    BD->>S: Membro jÃ¡ estÃ¡ desativado
    S->>O: Exibe mensagem informativa
```

1. No passo 2 do fluxo principal, o sistema verifica que o membro jÃ¡ estÃ¡ desativado.
2. O sistema exibe uma mensagem informando que o membro jÃ¡ estÃ¡ desativado.
3. A operaÃ§Ã£o Ã© cancelada.

### âš ï¸ F02 - Dados invÃ¡lidos

1. No passo 6 do fluxo principal, o sistema identifica dados invÃ¡lidos (motivo muito curto ou em branco).
2. O sistema exibe mensagens especÃ­ficas para cada erro encontrado.
3. O formulÃ¡rio continua aberto para correÃ§Ã£o.

## ğŸ§ª Exemplo de RequisiÃ§Ã£o

### RequisiÃ§Ã£o HTTP
```http
PATCH /api/v1/members/42/deactivate HTTP/1.1
Host: api.quilombopenabranca.org
Content-Type: application/json
Authorization: Bearer {token}

{
  "reason": "MudanÃ§a de residÃªncia para outro estado",
  "comments": "Membro solicitou desativaÃ§Ã£o temporÃ¡ria atÃ© retorno Ã  comunidade",
  "date": "2023-07-15"
}
```

### Resposta de Sucesso
```http
HTTP/1.1 200 OK
Content-Type: application/json

{
  "id": 42,
  "name": "Maria da Silva",
  "status": "inactive",
  "deactivationDate": "2023-07-15",
  "deactivationReason": "MudanÃ§a de residÃªncia para outro estado"
}
```

## ğŸ–¼ï¸ Interface de ConfirmaÃ§Ã£o

![ConfirmaÃ§Ã£o de DesativaÃ§Ã£o de Membro](https://via.placeholder.com/600x400.png?text=ConfirmaÃ§Ã£o+de+DesativaÃ§Ã£o)

## âš ï¸ Impactos da DesativaÃ§Ã£o

Quando um membro Ã© desativado no sistema:

- ğŸš« NÃ£o aparece nas listagens padrÃ£o de membros ativos
- ğŸ“ Permanece nos registros histÃ³ricos e relatÃ³rios completos
- ğŸ”’ MantÃ©m todo seu histÃ³rico de obrigaÃ§Ãµes e informaÃ§Ãµes
- ğŸ”„ Pode ser reativado posteriormente por um operador autorizado
- ğŸ‘‘ Tem seus cargos mantidos mas marcados como inativos

---

  #### ğŸŒ™ Quilombo Pena Branca ğŸŒ™
  ***Honrando nossas raÃ­zes, construindo nosso futuro***
