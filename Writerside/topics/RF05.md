# üîç RF05 - Detalhar Operador

![Logo.png](Logo.png){ width=150 }

## üìù Descri√ß√£o

Esta funcionalidade permite que o administrador visualize informa√ß√µes detalhadas sobre um operador espec√≠fico no sistema Quilombo Pena Branca, facilitando a gest√£o de usu√°rios e o controle de acesso.

## üëë Atores

- Administrador do sistema
- Operador

## ‚ö†Ô∏è Pr√©-condi√ß√µes

- O usu√°rio deve estar autenticado no sistema
- O operador a ser detalhado deve estar cadastrado no sistema
- Um operador n√£o-administrador s√≥ pode visualizar seus pr√≥prios detalhes

## üîå Endpoints

- `GET /api/v1/users/{id}`

## üìã Dados do Operador

| Campo          | Tipo      | Descri√ß√£o                       | Observa√ß√µes                         |
|----------------|-----------|---------------------------------|-------------------------------------|
| `id`           | `integer` | ID do operador                  | Identificador √∫nico                 |
| `name`         | `string`  | Nome completo do operador       | -                                   |
| `cpf`          | `string`  | CPF do operador                 | Formato: 999.999.999-99             |
| `isAdmin`      | `boolean` | Se o operador √© administrador   | true/false                          |
| `status`       | `string`  | Status do operador              | "ACTIVE" ou "INACTIVE"              |
| `createdAt`    | `date`    | Data de cria√ß√£o do operador     | Formato ISO 8601                    |
| `updatedAt`    | `date`    | Data da √∫ltima atualiza√ß√£o      | Formato ISO 8601                    |
| `lastLogin`    | `date`    | Data do √∫ltimo acesso           | Formato ISO 8601                    |
| `createdBy`    | `string`  | Nome de quem criou o registro   | Pode ser null para o primeiro admin |
| `activityLogs` | `array`   | Registro de atividades recentes | √öltimas 10 atividades               |

## üîÑ Fluxo Principal

```mermaid
sequenceDiagram
    actor A as Administrador
    participant S as Sistema
    participant BD as Banco de Dados
    
    A->>S: Acessa a p√°gina de listagem de operadores
    S->>BD: Busca operadores cadastrados
    BD->>S: Retorna lista de operadores
    S->>A: Exibe lista de operadores
    A->>S: Seleciona operador para visualizar detalhes
    S->>BD: Busca dados detalhados do operador
    BD->>S: Retorna dados completos
    S->>A: Exibe p√°gina de detalhes do operador
    A->>S: Navega entre op√ß√µes (voltar, editar, excluir)
```

1. O administrador acessa a p√°gina de listagem de operadores.
2. O sistema exibe a lista de operadores cadastrados.
3. O administrador seleciona o operador espec√≠fico que deseja visualizar.
4. O sistema busca e exibe todas as informa√ß√µes detalhadas sobre o operador selecionado.
5. O administrador visualiza os dados do operador, incluindo:
   - Informa√ß√µes pessoais (nome, CPF)
   - Informa√ß√µes de acesso (status, tipo de usu√°rio)
   - Estat√≠sticas de uso (data do √∫ltimo acesso, atividades recentes)
   - Hist√≥rico de altera√ß√µes (data de cria√ß√£o, √∫ltima atualiza√ß√£o)
6. O administrador pode realizar as seguintes a√ß√µes:
   - Voltar para a listagem de operadores
   - Editar os dados do operador
   - Desativar/excluir o operador

## üîÄ Fluxos Alternativos

### ‚ö†Ô∏è F01 - Operador n√£o encontrado

```mermaid
sequenceDiagram
    actor A as Administrador
    participant S as Sistema
    participant BD as Banco de Dados
    
    A->>S: Tenta visualizar detalhes de um operador
    S->>BD: Busca operador pelo ID
    BD->>S: Operador n√£o encontrado
    S->>A: Exibe mensagem de erro
    S->>A: Redireciona para listagem de operadores
```

1. No passo 4 do fluxo principal, o sistema n√£o encontra o operador solicitado.
2. O sistema exibe uma mensagem informando que o operador n√£o foi encontrado.
3. O sistema redireciona o usu√°rio para a p√°gina de listagem de operadores.

### ‚ö†Ô∏è F02 - Acesso n√£o autorizado

1. Um operador sem privil√©gios de administrador tenta acessar os detalhes de outro operador.
2. O sistema verifica que o usu√°rio n√£o tem permiss√£o para esta a√ß√£o.
3. O sistema exibe uma mensagem de acesso n√£o autorizado.
4. O sistema redireciona o usu√°rio para a p√°gina inicial.

## üß™ Exemplo de Resposta da API

```http
HTTP/1.1 200 OK
Content-Type: application/json

{
  "id": 42,
  "name": "Jo√£o da Silva Santos",
  "cpf": "123.456.789-01",
  "isAdmin": false,
  "status": "ACTIVE",
  "createdAt": "2023-01-15T10:30:00Z",
  "updatedAt": "2023-06-20T09:15:30Z",
  "lastLogin": "2023-06-22T14:25:45Z",
  "createdBy": "Maria Administradora",
  "activityLogs": [
    {
      "action": "LOGIN",
      "timestamp": "2023-06-22T14:25:45Z",
      "details": "Login bem-sucedido"
    },
    {
      "action": "MEMBER_UPDATE",
      "timestamp": "2023-06-21T11:10:22Z",
      "details": "Atualiza√ß√£o do membro ID 15"
    },
    {
      "action": "MEMBER_CREATE",
      "timestamp": "2023-06-20T16:35:12Z",
      "details": "Cria√ß√£o do membro ID 28"
    }
    // ... mais atividades
  ]
}
```

## üñºÔ∏è Interface de Visualiza√ß√£o

![Detalhes do Operador](https://via.placeholder.com/800x600.png?text=Detalhes+do+Operador)

## üìä Se√ß√µes da Interface

### üë§ Informa√ß√µes Pessoais
- Nome completo
- CPF (parcialmente mascarado para seguran√ßa)
- Tipo de usu√°rio (Administrador/Operador)
- Status atual (Ativo/Inativo)

### üìÜ Datas Importantes
- Data de cria√ß√£o da conta
- Data da √∫ltima atualiza√ß√£o
- Data e hora do √∫ltimo acesso

### üìù Atividades Recentes
Tabela das √∫ltimas a√ß√µes realizadas pelo operador, incluindo:
- Tipo de a√ß√£o (login, cria√ß√£o de membro, etc.)
- Data e hora da a√ß√£o
- Detalhes adicionais sobre a a√ß√£o

### ‚öôÔ∏è A√ß√µes Dispon√≠veis
- Bot√£o para editar dados do operador
- Bot√£o para desativar/excluir operador
- Bot√£o para voltar √† listagem

## üîê Considera√ß√µes de Seguran√ßa

- Dados sens√≠veis como senhas nunca s√£o exibidos
- CPF √© parcialmente mascarado na interface
- Log de visualiza√ß√£o √© mantido para fins de auditoria
- Acesso √†s informa√ß√µes √© controlado por permiss√µes de usu√°rio

---

  #### üåô Quilombo Pena Branca üåô
  ***Honrando nossas ra√≠zes, construindo nosso futuro***
```

---
# Requisitos
## Requisitos Funcionais

| Cod. | Nome               | Ator     | Objetivo                                            |
|------|--------------------|----------|-----------------------------------------------------|