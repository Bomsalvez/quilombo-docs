# ðŸ‘¥ RF05 - Cadastrar Membro

![Logo.png](Logo.png){ width=150 }

## ðŸ“ DescriÃ§Ã£o

Esta funcionalidade permite que o operador cadastre um novo membro no sistema Quilombo Pena Branca, registrando tanto informaÃ§Ãµes pessoais quanto espirituais.

## ðŸ‘‘ Atores

- Administrador do sistema
- Operador

## âš ï¸ PrÃ©-condiÃ§Ãµes

- O operador deve estar autenticado no sistema
- O CPF informado nÃ£o pode estar registrado para outro membro

## ðŸ”Œ Endpoints

- `POST /quilombo-api/member`

## ðŸ“‹ Dados do Membro

| Campo              | Tipo      | ObrigatÃ³rio | DescriÃ§Ã£o                                    | RestriÃ§Ãµes                      |
|--------------------|-----------|-------------|----------------------------------------------|---------------------------------|
| `name`             | `string`  | âœ… Sim       | Nome completo do membro                      | MÃ­nimo de 3 caracteres          |
| `email`            | `string`  | âœ… Sim       | E-mail do membro                             | Formato vÃ¡lido de e-mail        |
| `cpf`              | `string`  | âœ… Sim       | CPF do membro                                | Formato vÃ¡lido (999.999.999-99) |
| `phone`            | `string`  | âœ… Sim       | Telefone do membro                           | Formato vÃ¡lido                  |
| `dateOfBirth`      | `date`    | âœ… Sim       | Data de nascimento                           | Formato vÃ¡lido (YYYY-MM-DD)     |
| `entryDate`        | `date`    | âœ… Sim       | Data entrada no terreiro/AssociaÃ§Ã£o/Quilombo | Formato vÃ¡lido (YYYY-MM-DD)     |
| `biologicalFather` | `string`  | âœ… Sim       | Pai (biolÃ³gico)                              | MÃ­nimo de 3 caracteres          |
| `biologicalMother` | `string`  | âœ… Sim       | MÃ£e (biolÃ³gica)                              | MÃ­nimo de 3 caracteres          |
| `spiritualFather`  | `string`  | âœ… Sim       | Pai (santo)                                  | MÃ­nimo de 3 caracteres          |
| `initiationDate`   | `date`    | âœ… Sim       | Data da Feitura                              | Formato vÃ¡lido (YYYY-MM-DD)     |
| `obligationsDate`  | `date`    | âœ… Sim       | Data das obrigaÃ§Ãµes                          | Formato vÃ¡lido (YYYY-MM-DD)     |
| `isRodante`        | `boolean` | âœ… Sim       | Se o membro Ã© rodante                        | true/false                      |
| `positions`        | `array`   | âŒ NÃ£o       | Cargos do membro                             | Array de IDs de cargos          |
| `address`          | `object`  | âœ… Sim       | EndereÃ§o completo                            | Objeto com dados de endereÃ§o    |

## ðŸ  Dados do EndereÃ§o

| Campo       | Tipo     | ObrigatÃ³rio | DescriÃ§Ã£o        | RestriÃ§Ãµes         |
|-------------|----------|-------------|------------------|---------------------|
| `zipCode`   | `string` | âœ… Sim      | CEP              | Formato: 99999-999  |
| `street`    | `string` | âœ… Sim      | Rua/Logradouro   | -                   |
| `number`    | `string` | âœ… Sim      | NÃºmero           | -                   |
| `complement`| `string` | âŒ NÃ£o      | Complemento      | -                   |
| `district`  | `string` | âœ… Sim      | Bairro           | -                   |
| `city`      | `string` | âœ… Sim      | Cidade           | -                   |
| `state`     | `string` | âœ… Sim      | Estado           | 2 caracteres (sigla)|

## ðŸ”„ Fluxo Principal

```mermaid
sequenceDiagram
    actor O as Operador
    participant S as Sistema
    participant BD as Banco de Dados
    
    O->>S: Acessa pÃ¡gina de cadastro de membro
    S->>O: Exibe formulÃ¡rio de cadastro
    O->>S: Preenche dados do membro
    O->>S: Envia formulÃ¡rio
    S->>S: Valida dados informados
    S->>BD: Verifica se CPF jÃ¡ existe
    BD->>S: Retorna resultado
    S->>BD: Salva novo membro
    S->>O: Navega para a pagina de obrigaÃ§Ãµes
```

1. O operador acessa a pÃ¡gina de cadastro de membro.
2. O sistema exibe um formulÃ¡rio de cadastro com todos os campos necessÃ¡rios.
3. O operador preenche os campos obrigatÃ³rios do formulÃ¡rio.
4. O operador envia o formulÃ¡rio de cadastro.
5. O sistema valida os dados informados.
6. O sistema cria um registro de membro com os dados fornecidos.
7. O sistema exibe uma mensagem de confirmaÃ§Ã£o de cadastro.

## ðŸ”€ Fluxos Alternativos

### âš ï¸ F01 - CPF jÃ¡ cadastrado

```mermaid
sequenceDiagram
    actor O as Operador
    participant S as Sistema
    participant BD as Banco de Dados
    
    O->>S: Acessa pÃ¡gina de cadastro de membro
    S->>O: Exibe formulÃ¡rio de cadastro
    O->>S: Preenche dados do membro
    O->>S: Envia formulÃ¡rio
    S->>S: Valida dados informados
    S->>BD: Verifica se CPF jÃ¡ existe
    BD->>S: CPF jÃ¡ existe
    S->>O: Exibe mensagem de erro
```

1. O operador acessa a pÃ¡gina de cadastro de membro.
2. O sistema exibe um formulÃ¡rio de cadastro.
3. O operador preenche os campos obrigatÃ³rios do formulÃ¡rio.
4. O operador envia o formulÃ¡rio de cadastro.
5. O sistema valida os dados e identifica que o CPF jÃ¡ estÃ¡ cadastrado.
6. O sistema exibe uma mensagem de erro informando que o CPF jÃ¡ estÃ¡ em uso.
7. O sistema mantÃ©m os dados jÃ¡ preenchidos para correÃ§Ã£o.

### âš ï¸ F02 - Dados invÃ¡lidos

1. No passo 5 do fluxo principal, o sistema identifica dados invÃ¡lidos (formato incorreto, campos obrigatÃ³rios em branco).
2. O sistema exibe mensagens especÃ­ficas para cada erro encontrado.
3. O sistema mantÃ©m os dados jÃ¡ preenchidos para correÃ§Ã£o.

## ðŸ§ª Exemplo de RequisiÃ§Ã£o

### RequisiÃ§Ã£o HTTP
```http
POST /quilombo-api/member HTTP/1.1
Host: api.quilombopenabranca.org
Content-Type: application/json
Authorization: Bearer {token}

{
  "name": "Maria da Silva",
  "email": "maria@email.com",
  "cpf": "123.456.789-01",
  "phone": "(11) 98765-4321",
  "dateOfBirth": "1985-05-12",
  "entryDate": "2018-03-20",
  "biologicalFather": "JoÃ£o da Silva",
  "biologicalMother": "Ana da Silva",
  "spiritualFather": "JosÃ© de OxÃ³ssi",
  "spiritualMother": "Maria de IemanjÃ¡",
  "initiationDate": "2019-06-15",
  "obligationsDate": "2022-06-15",
  "isRodante": true,
  "positions": [3, 5],
  "address": {
    "zipCode": "01234-567",
    "street": "Rua das Flores",
    "number": "123",
    "complement": "Apto 45",
    "district": "Jardim Primavera",
    "city": "SÃ£o Paulo",
    "state": "SP"
  }
}
```


## ðŸ–¼ï¸ Interface de ReferÃªncia

![cadastro-membro.png](cadastro-membro.png)

> ---------------------------------------
> #### ðŸŒ™ Quilombo Pena Branca ðŸŒ™
> ***Honrando nossas raÃ­zes, construindo nosso futuro***
> ---------------------------------------
